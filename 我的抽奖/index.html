<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>抽奖</title>

<style>
    html,
    body {
        margin: 0;
        padding: 0;
        /* overflow: hidden; */
    }

    body {
        background: url(images/body_bg.jpg) 0px 0px repeat-x;
    }

    .main_bg {
        background: url(images/main_bg.jpg) top center no-repeat;
        height: 1000px;
    }

    .main {
        width: 1200px;
        height: 1000px;
        position: relative;
        margin: 0 auto;
        background-color: blue;
        /* opacity: 0.1 */
    }

    .num_box {
        width: 1200px;
        height: 600px;
        position: absolute;
        top: 120px;
        z-index: 8;
        overflow: hidden;
        text-align: center;
        background-color: red;
        /* opacity: 0.5 */
    }

    .num {
        background: top center repeat-y;
        width: 200px;
        height: 250px;
        float: left;
        margin-left: 33px;
        margin-top: 25px;
        background-color: white;
        overflow: hidden;
        /* opacity: 0.5 */
    }

    .persons {
        width: 200px;
        /* height: 2500px; */
        background-color: white
    }

    .person {
        width: 200px;
        height: 250px;
    }

    .btn {
        background: url(images/btn_start.png);
        margin: 0 auto;
        margin-top: 750px;
        width: 264px;
        height: 89px;
        z-index: 9999
    }
</style>

<body>
    <div class="main_bg">
        <div class="main">
            <div id="res" style="text-align:center;color:#fff;padding-top:15px;"></div>
            <div class="num_box">
                <div class="num">
                    <div class="persons" id="person1">
                        <div class="person">
                            <div>
                                <img width="200px" height="200px" src="img/slot1.png" />
                                <div style="height:50px;text-align:center">1 王树伦 DM02154</div>
                            </div>
                        </div>
                        <div class="person">
                            <div>
                                <img width="200px" height="250px" src="img/slot2.png" />
                            </div>
                        </div>
                        <div class="person">
                            <div>
                                <img width="200px" height="250px" src="img/slot3.png" />
                            </div>
                        </div>
                        <div class="person">
                            <div>
                                <img width="200px" height="250px" src="img/slot4.png" />
                            </div>
                        </div>
                        <div class="person">
                            <div>
                                <img width="200px" height="250px" src="img/slot5.png" />
                            </div>
                        </div>
                        <div class="person">
                            <div>
                                <img width="200px" height="250px" src="img/slot6.png" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="num"></div>
                <div class="num"></div>
                <div class="num"></div>
                <div class="num"></div>
                <div class="num"></div>
                <div class="num"></div>
                <div class="num"></div>
                <div class="num"></div>
                <div class="num"></div>
            </div>
            <div class="btn"></div>
        </div>
    </div>
</body>

</html>
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/easing.js"></script>
<link rel="stylesheet" href="slotMachine/jquery.slotmachine.css" type="text/css" media="screen" />
<script src="slotMachine/jquery.slotmachine.js"></script>
<script src="js/data.js"></script>
<script>
    function randomID() {
        var randNum = Math.floor(Math.random() * 10);
        return randNum;
    }
    var isBegin = false;
    $(function () {
        var personHtml = serializePersonHtml()
        addPersonHtml2Unit(personHtml);
        var machine1 = $("#person1").slotMachine({
            active: 0,
            delay: 1000,
            stopHidden: false,
            direction: 'up'
        });
        $(".btn").click(function () {
            if (!isBegin) {
                //machine1.direction = 'up';
                machine1.futureActive = 3;
                machine1.shuffle();
                isBegin = true;
            } else {
                machine1.stop()
                isBegin = false;
                console.log(machine1.active + 1)
            }

        });
    });

    //初始化人员DIV长条
    function serializePersonHtml() {
        var personsHtml = '';
        for (let index = 0; index < data.length; index++) {
            const p = data[index]
            console.log(p.id + p.name + p.jobNo)
            personsHtml += '<div class="person"><div><img width="200px" height="200px" src="photo/' + p.id + p.name + '.jpg" />' +
                +'<div style="height:50px;text-align:center">' + p.id + p.name + p.jobNo + '</div></div></div>'
        }
        return personsHtml
    }

    //给每个格子加入HTML
    function addPersonHtml2Unit(personHtml) {
        $('.num').each(function(index,element){
            $(element).html(personHtml)
        })
    }

</script>